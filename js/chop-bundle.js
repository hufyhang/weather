// ChopJS Module Bundle
// Downloaded: Thu Feb 05 2015 17:11:39 GMT+0000 (GMT)
// + crypto -- 0.1
// + scope -- 0.2
// + store -- 0.1
$ch.define("crypto",function(){"use strict";$$CHOP.crypto={},$$CHOP.crypto.md5=function(r){function t(r,t){return r<<t|r>>>32-t}function n(r,t){var n,o,e,a,f;return e=2147483648&r,a=2147483648&t,n=1073741824&r,o=1073741824&t,f=(1073741823&r)+(1073741823&t),n&o?2147483648^f^e^a:n|o?1073741824&f?3221225472^f^e^a:1073741824^f^e^a:f^e^a}function o(r,t,n){return r&t|~r&n}function e(r,t,n){return r&n|t&~n}function a(r,t,n){return r^t^n}function f(r,t,n){return t^(r|~n)}function h(r,e,a,f,h,c,u){return r=n(r,n(n(o(e,a,f),h),u)),n(t(r,c),e)}function c(r,o,a,f,h,c,u){return r=n(r,n(n(e(o,a,f),h),u)),n(t(r,c),o)}function u(r,o,e,f,h,c,u){return r=n(r,n(n(a(o,e,f),h),u)),n(t(r,c),o)}function i(r,o,e,a,h,c,u){return r=n(r,n(n(f(o,e,a),h),u)),n(t(r,c),o)}function C(r){for(var t,n=r.length,o=n+8,e=(o-o%64)/64,a=16*(e+1),f=Array(a-1),h=0,c=0;n>c;)t=(c-c%4)/4,h=c%4*8,f[t]=f[t]|r.charCodeAt(c)<<h,c++;return t=(c-c%4)/4,h=c%4*8,f[t]=f[t]|128<<h,f[a-2]=n<<3,f[a-1]=n>>>29,f}function g(r){var t,n,o="",e="";for(n=0;3>=n;n++)t=r>>>8*n&255,e="0"+t.toString(16),o+=e.substr(e.length-2,2);return o}function d(r){r=r.replace(/\r\n/g,"\n");for(var t="",n=0;n<r.length;n++){var o=r.charCodeAt(n);128>o?t+=String.fromCharCode(o):o>127&&2048>o?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}if(0===arguments.length)throw new Error("crypto.md5 has to be given a string.");var s,A,m,v,S,p,l,y,w,$=Array(),b=7,k=12,H=17,O=22,P=5,E=9,L=14,j=20,q=4,x=11,z=16,B=23,D=6,F=10,G=15,I=21;for(r=d(r),$=C(r),p=1732584193,l=4023233417,y=2562383102,w=271733878,s=0;s<$.length;s+=16)A=p,m=l,v=y,S=w,p=h(p,l,y,w,$[s+0],b,3614090360),w=h(w,p,l,y,$[s+1],k,3905402710),y=h(y,w,p,l,$[s+2],H,606105819),l=h(l,y,w,p,$[s+3],O,3250441966),p=h(p,l,y,w,$[s+4],b,4118548399),w=h(w,p,l,y,$[s+5],k,1200080426),y=h(y,w,p,l,$[s+6],H,2821735955),l=h(l,y,w,p,$[s+7],O,4249261313),p=h(p,l,y,w,$[s+8],b,1770035416),w=h(w,p,l,y,$[s+9],k,2336552879),y=h(y,w,p,l,$[s+10],H,4294925233),l=h(l,y,w,p,$[s+11],O,2304563134),p=h(p,l,y,w,$[s+12],b,1804603682),w=h(w,p,l,y,$[s+13],k,4254626195),y=h(y,w,p,l,$[s+14],H,2792965006),l=h(l,y,w,p,$[s+15],O,1236535329),p=c(p,l,y,w,$[s+1],P,4129170786),w=c(w,p,l,y,$[s+6],E,3225465664),y=c(y,w,p,l,$[s+11],L,643717713),l=c(l,y,w,p,$[s+0],j,3921069994),p=c(p,l,y,w,$[s+5],P,3593408605),w=c(w,p,l,y,$[s+10],E,38016083),y=c(y,w,p,l,$[s+15],L,3634488961),l=c(l,y,w,p,$[s+4],j,3889429448),p=c(p,l,y,w,$[s+9],P,568446438),w=c(w,p,l,y,$[s+14],E,3275163606),y=c(y,w,p,l,$[s+3],L,4107603335),l=c(l,y,w,p,$[s+8],j,1163531501),p=c(p,l,y,w,$[s+13],P,2850285829),w=c(w,p,l,y,$[s+2],E,4243563512),y=c(y,w,p,l,$[s+7],L,1735328473),l=c(l,y,w,p,$[s+12],j,2368359562),p=u(p,l,y,w,$[s+5],q,4294588738),w=u(w,p,l,y,$[s+8],x,2272392833),y=u(y,w,p,l,$[s+11],z,1839030562),l=u(l,y,w,p,$[s+14],B,4259657740),p=u(p,l,y,w,$[s+1],q,2763975236),w=u(w,p,l,y,$[s+4],x,1272893353),y=u(y,w,p,l,$[s+7],z,4139469664),l=u(l,y,w,p,$[s+10],B,3200236656),p=u(p,l,y,w,$[s+13],q,681279174),w=u(w,p,l,y,$[s+0],x,3936430074),y=u(y,w,p,l,$[s+3],z,3572445317),l=u(l,y,w,p,$[s+6],B,76029189),p=u(p,l,y,w,$[s+9],q,3654602809),w=u(w,p,l,y,$[s+12],x,3873151461),y=u(y,w,p,l,$[s+15],z,530742520),l=u(l,y,w,p,$[s+2],B,3299628645),p=i(p,l,y,w,$[s+0],D,4096336452),w=i(w,p,l,y,$[s+7],F,1126891415),y=i(y,w,p,l,$[s+14],G,2878612391),l=i(l,y,w,p,$[s+5],I,4237533241),p=i(p,l,y,w,$[s+12],D,1700485571),w=i(w,p,l,y,$[s+3],F,2399980690),y=i(y,w,p,l,$[s+10],G,4293915773),l=i(l,y,w,p,$[s+1],I,2240044497),p=i(p,l,y,w,$[s+8],D,1873313359),w=i(w,p,l,y,$[s+15],F,4264355552),y=i(y,w,p,l,$[s+6],G,2734768916),l=i(l,y,w,p,$[s+13],I,1309151649),p=i(p,l,y,w,$[s+4],D,4149444226),w=i(w,p,l,y,$[s+11],F,3174756917),y=i(y,w,p,l,$[s+2],G,718787259),l=i(l,y,w,p,$[s+9],I,3951481745),p=n(p,A),l=n(l,m),y=n(y,v),w=n(w,S);var J=g(p)+g(l)+g(y)+g(w);return J.toLowerCase()},$$CHOP.crypto.sha1=function(r){function t(r,t){var n=r<<t|r>>>32-t;return n}function n(r){var t,n,o="";for(t=7;t>=0;t--)n=r>>>4*t&15,o+=n.toString(16);return o}function o(r){r=r.replace(/\r\n/g,"\n");for(var t="",n=0;n<r.length;n++){var o=r.charCodeAt(n);128>o?t+=String.fromCharCode(o):o>127&&2048>o?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}if(0===arguments.length)throw new Error("crypto.sha1 has to be given a string.");var e,a,f,h,c,u,i,C,g,d=new Array(80),s=1732584193,A=4023233417,m=2562383102,v=271733878,S=3285377520;r=o(r);var p=r.length,l=new Array;for(a=0;p-3>a;a+=4)f=r.charCodeAt(a)<<24|r.charCodeAt(a+1)<<16|r.charCodeAt(a+2)<<8|r.charCodeAt(a+3),l.push(f);switch(p%4){case 0:a=2147483648;break;case 1:a=r.charCodeAt(p-1)<<24|8388608;break;case 2:a=r.charCodeAt(p-2)<<24|r.charCodeAt(p-1)<<16|32768;break;case 3:a=r.charCodeAt(p-3)<<24|r.charCodeAt(p-2)<<16|r.charCodeAt(p-1)<<8|128}for(l.push(a);l.length%16!=14;)l.push(0);for(l.push(p>>>29),l.push(p<<3&4294967295),e=0;e<l.length;e+=16){for(a=0;16>a;a++)d[a]=l[e+a];for(a=16;79>=a;a++)d[a]=t(d[a-3]^d[a-8]^d[a-14]^d[a-16],1);for(h=s,c=A,u=m,i=v,C=S,a=0;19>=a;a++)g=t(h,5)+(c&u|~c&i)+C+d[a]+1518500249&4294967295,C=i,i=u,u=t(c,30),c=h,h=g;for(a=20;39>=a;a++)g=t(h,5)+(c^u^i)+C+d[a]+1859775393&4294967295,C=i,i=u,u=t(c,30),c=h,h=g;for(a=40;59>=a;a++)g=t(h,5)+(c&u|c&i|u&i)+C+d[a]+2400959708&4294967295,C=i,i=u,u=t(c,30),c=h,h=g;for(a=60;79>=a;a++)g=t(h,5)+(c^u^i)+C+d[a]+3395469782&4294967295,C=i,i=u,u=t(c,30),c=h,h=g;s=s+h&4294967295,A=A+c&4294967295,m=m+u&4294967295,v=v+i&4294967295,S=S+C&4294967295}var g=n(s)+n(A)+n(m)+n(v)+n(S);return g.toLowerCase()}});
$ch.define("scope",function(){"use strict";function a(a,b){var c=!0;"string"==typeof a&&(c=!1,b=a,a=document);var d,e=a;d=c?[a]:e.querySelectorAll("[ch-scope="+b+"]");var f=$$CHOP.scope(b);void 0!==d&&null!==d&&d.forEach(function(a){var b=a;void 0===f._els?f._els=[a]:f._els.push(a),a=a.cloneNode(!0);var c=a.querySelectorAll("[ch-scope]");null!==c&&void 0!==c&&c.forEach(function(a){a.parentNode.removeChild(a)});var d=a.querySelectorAll("[ch-name]");null!==d&&void 0!==d&&d.forEach(function(a){var c=a.getAttribute("ch-name"),d=a.getAttribute("id");d&&c&&(f[c]=$$CHOP.element(b.querySelector("#"+d)))});var e=a.querySelectorAll("[ch-data]");null!==e&&void 0!==e&&e.forEach(function(a){var b=a.getAttribute("id");b&&(b=b.trim(),void 0===f._data_entities?f._data_entities=[b]:f._data_entities.push(b))});var g=f._eventHandler,h=a.querySelectorAll("[ch-event]")||[];h.forEach(function(a){var b=a.getAttribute("id"),c=a.getAttribute("ch-event")||"";c=c.split(";").map(function(a){return a.trim()}),c.forEach(function(a){var c=a.split(":").map(function(a){return a.trim()}),d=c[0],e=c[1].split(",").map(function(a){return a.trim()});document.querySelector("#"+b).addEventListener(d,function(a){e.forEach(function(b){g.emit(b,a)})},!1)})})})}function b(a){var b=$$CHOP.scope(a);if(b&&void 0!==b._els&&$$CHOP.isArray(b._els)!==!1){var d=b._data_entities;d.forEach(function(d){var e=!0,f=document.querySelector("#"+d),g=f.getAttribute("ch-data");if(null!==g&&""!==g)e=!1,c(a,g,f,!1);else{var h=f.innerHTML.match(/{{[^{]{1,}}}/g);if(null!==h)for(var i=0,j=h.length;i!==j;++i)g=h[i],g=g.split("|")[0],g=g.replace(/{{/g,""),g=g.replace(/}}/g,""),g=g.trim(),c(a,g,f,!0)}var k="keyup",l=f.getAttribute("type");null!==l&&(l=l.toUpperCase(),("RANGE"===l||"SELECT"===f.tagName.toUpperCase())&&(k="change"));var m=f.tagName.toUpperCase();if(("INPUT"===m||"TEXTAREA"===m||"SELECT"===m)&&f.addEventListener(k,function(b){b=b||window.event,g=g.trim();var c=b.target||b.srcElement,d=c.value,e=$$CHOP.scopes[a][g].get();d!==e&&$$CHOP.scopes[a][g].set(d)},!1),e){for(var n=f.innerHTML,o=f.innerHTML.match(/{{[^{]{1,}}}/g),i=0;i!==o.length;++i){var p=o[i].replace(/{/g,"");p=p.replace(/}/g,"");var q=p.split("|").map(function(a){return a.trim()});p=q[0].trim(),p=p.split(".")[0],p=b[p].get();for(var r=1,s=q.length;r!==s;++r){var t=q[r].trim();t=b[t]||function(a){return a},p=t.call(this,p)}n=n.replace(new RegExp(o[i],"g"),p)}f.innerHTML=n,$$CHOP._loadView(f)}})}}function c(a,b,c,e){var f=$$CHOP.scope(a);b=b.split(".")[0],void 0===f._data[b]&&(f._data[b]={_els:[],_val:void 0,_watch:function(){},watch:function(a){if("function"!=typeof a)throw new Error("ChopJS Scope data has to be watched by a function.");return this._watch=a,this},get:function(){return this._val},set:function(a){if(0===arguments.length)return!1;var b=this._val;this._val=a,this._watch.apply(this,[b,this._val]);var c=this;this._els.forEach(function(a){var b=a._isInline;if(b){var e=a._html,g=e.match(/{{[^{]{1,}}}/g)||[];g.forEach(function(a){var b,c;if(a=a.replace(/{/g,""),a=a.replace(/}/g,""),a=a.trim(),-1===a.indexOf(".")){b=a.split("|").map(function(a){return a.trim()});for(var g=f._data[b[0]].get(),h=1,i=b.length;h!==i;++h)c=b[h].trim(),c=f[c]||function(a){return a},g=c.call(this,g);e=d(e,a,g)}else{b=a.split("|").map(function(a){return a.trim()});for(var j=b[0].split("."),g=f._data[j[0]].get(),h=1,i=j.length;h!==i;++h)g=g[j[h]];for(h=1,i=b.length;h!==i;++h)c=b[h].trim(),c=f[c]||function(a){return a},g=c.call(this,g);e=d(e,a,g)}}),document.querySelector("#"+a._id).innerHTML=e}else $$CHOP.find("#"+a._id).val(c._val)})}}),b=b.split(".")[0];var g=c.getAttribute("id");f._data[b]._els.push({_isInline:e,_id:g,_html:c.innerHTML}),$$CHOP.scopes[a][b]=f._data[b]}function d(a,b,c){b=b.trim(),b=b.replace(/\|/g,"\\|");var d=new RegExp("{{[\\ ]*?"+b+"[\\ ]*?}}","g");return a.replace(d,c)}function e(a){this.scope=a}$$CHOP.scopes={},$$CHOP.scope=function(c,d){if("string"!=typeof c)throw new Error("$ch.scope requires at least a string-type name parameter.");if(void 0===d)return $$CHOP.scopes[c];$$CHOP.scopes[c]={_els:[],_data_entities:[],_data:{},_events:{}};var f=new e($$CHOP.scopes[c]);$$CHOP.scopes[c]._eventHandler=f,a(c),b(c);var g=document.querySelectorAll("[ch-scope="+c+"]")||[];return g.forEach(function(a){$$CHOP._addInlineTemplate(a),$$CHOP._loadView(a)}),d.apply(this,[$$CHOP.scopes[c],f]),$$CHOP},e.prototype={listen:function(a,b){if("string"!=typeof a||"function"!=typeof b)throw new Error('ChopJS Scope event "listen" requires a string-type name parameter and a callback function.');return this.scope._events[a]=b,this},emit:function(a){if("string"!=typeof a)throw new Error('ChopJS Scope event "emit" requires at least a string-type event name parameter.');var b=this.scope._events[a];if("function"==typeof b){for(var c=[],d=1;d!==arguments.length;++d)c.push(arguments[d]);b.apply(this,c)}return this}}});
$ch.define("store",function(){"use strict";$$CHOP.store={};var e={_cache:{}};$$CHOP.store={local:function(e,r){if("undefined"==typeof Storage)throw new Error("Local storage is not supported by browser.");if(0===arguments.length)throw new Error("$ch.store.local requires at least one parameter.");if(1===arguments.length){var t=localStorage.getItem(e);return null!==t&&(t=JSON.parse(t)),t}if(void 0===r)throw new Error("$ch.store.local does not allow undefined value.");localStorage.setItem(e,JSON.stringify(r))},session:function(e,r){if("undefined"==typeof Storage)throw new Error("Session storage is not supported by browser.");if(0===arguments.length)throw new Error("$ch.store.session requires at least one parameter.");if(1===arguments.length){var t=sessionStorage.getItem(e);return null!==t&&(t=JSON.parse(t)),t}if(void 0===r)throw new Error("$ch.store.session does not allow undefined value.");sessionStorage.setItem(e,JSON.stringify(r))},cookie:function(e,r,t){if(void 0===document.cookie)throw new Error("Cookie is not supported by this browser.");var o,n;if(0===arguments.length)return n=document.cookie,void 0===n||""===n?"":n;if(1===arguments.length&&(n=document.cookie,"object"==typeof e&&($$CHOP.each(e,function(e,r){o=new RegExp(e+"\\ *=[^;]{0,}","g"),n=n.replace(o,""),n=e+"="+encodeURIComponent(r)+";"+n}),document.cookie=n),"string"==typeof e)){if(n=document.cookie,void 0===n||""===n)return"";o=new RegExp(e+"\\ *=[^;]{0,}","g");var i=n.match(o);if(null!==i){var s=i[0];return o=new RegExp(e+"\\ *=\\ *","g"),s=s.trim().replace(o,"").trim(),decodeURIComponent(s)}return null}if(arguments.length>=2)if(n=document.cookie,void 0===n&&(n=""),o=new RegExp(e+"\\ *=[0-9A-Za-z\\.\\ \\-%]+;?","g"),n=n.replace(o,""),n=e+"="+encodeURIComponent(r)+";"+n,3===arguments.length){void 0!==t&&(t=parseFloat(t,10));var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);var c="expires="+a.toGMTString();document.cookie=n+"; "+c}else document.cookie=n},cache:function(r,t){if(0===arguments.length)return e._cache;if(1===arguments.length){if("string"!=typeof r)throw new Error("$ch.store.cache requires a string-type parameter.");return e._cache[r]}if(2===arguments.length){if("string"!=typeof r)throw new Error('$ch.store.cache requires a string-type value for "key" parameter.');return e._cache[r]={},e._cache[r]=t,this}}}});
$ch.define("event",function(){"use strict";var a={},b={};$$CHOP.originalSourceFunction=$$CHOP.source;var c=function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&++b;return b},d=function(a){var b="change";if("TEXTAREA"===a.tagName.toUpperCase())b="keyup";else if("INPUT"===a.tagName.toUpperCase()){var c=a.getAttribute("type").toUpperCase(),d="TEXT"===c||"PASSWORD"===c;d&&(b="keyup")}return b};$$CHOP.event={},$$CHOP.event={watches:b,listen:function(b,c){if(0===arguments.length)throw new Error("$ch.event.listen requires at least one parameter.");if(1===arguments.length){var d;return d=void 0!==a[b]?a[b]._callback:void 0}return a[b]={},a[b]._event=b,a[b]._callback=c,this},emit:function(b,c){if(0===arguments.length)throw new Error("$ch.event.emit requires at least one parameter.");if($$CHOP._isArray(b)===!1){if(void 0===a[b])return void 0;a[b]._callback(c)}else for(var d=0,e=b.length;d!==e;++d)a[b[d]]._callback(c);return this},watch:function(a,c){if(2!==arguments.length)throw new Error("$ch.event.watch requires two parameters. i.e. data-source name, callback.");var e,f=$$CHOP.sources[a].data;e=$$CHOP._isArray(f)?f.slice(0):"object"==typeof f?Object.create(f):f,b[a]={source:a,old:e,callback:c};var g=function(){if($$CHOP.sources[a].data!==b[a].old){var d={},e=$$CHOP.sources[a].data;d.current=e,d.old=b[a].old,c(d),b[a].old=e}};b[a].watchChange=g;for(var h=0,i=$$CHOP.sources[a].els.length;h!==i;++h){var j=$$CHOP.sources[a].els[h],k=d(j);j.addEventListener(k,g)}return this},unwatch:function(a){if(1!==arguments.length)throw new Error("$ch.event.unwatch has to be given a data-source name parameter.");for(var c=0,e=$$CHOP.sources[a].els.length;c!==e;++c){var f=$$CHOP.sources[a].els[c],g=d(f);f.removeEventListener(g,b[a].watchChange)}return delete b[a],this},once:function(a,b){var c,d;return function(){return d?c:(c=a.apply(b||this,arguments),d=1,a=null,c)}},nextTick:function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),queue:function(){var a={callbacks:[],current:0,length:0,data:void 0,add:function(a){if(void 0!==a)if($$CHOP.isArray(a)){var b=this;$$CHOP.each(a,function(a){b.callbacks.push(a),++b.length})}else this.callbacks.push(a),++this.length;return this},remove:function(a){if(void 0!==a){var b;if($$CHOP.isArray(a)){var c=this;$$CHOP.each(a,function(a){b=c.callbacks.indexOf(a),-1!==b&&(c.callbacks.splice(b,1),--c.length)})}else b=this.callbacks.indexOf(a),-1!==b&&(this.callbacks.splice(b,1),--this.length)}return this},promote:function(a){if(void 0!==a){var b=this.callbacks.indexOf(a);if(-1!==b){var c=this.callbacks.splice(b,1)[0];this.callbacks.unshift(c)}}return this},reset:function(){return this.current=0,this},run:function(a){if(0!==arguments.length&&(this.data=a),this.current<this.length){var b=this.current;++this.current,this.data=this.callbacks[b](this.data)}return this.data},stop:function(){this.current=0;var a=this.data;return this.data=void 0,a}};return $$CHOP.each(arguments,function(b,c){a.add(c)}),a}};var e=function(a){var d=b[a];if(void 0===d)return void 0;var e=$$CHOP.sources[d.source].data,f=!1;if(typeof e!=typeof d.old)f=!0;else if($$CHOP._isArray(e)){if(e.length!==d.old.length)f=!0;else for(var g=0,h=e.length;g!==h;++g)if(e[g]!==d.old[g]){f=!0;break}}else"object"==typeof e&&f===!1?c(e)!==c(d.old)?f=!0:$$CHOP.each(e,function(a){e[a]!==d.old[a]&&(f=!0)}):e!==d.old&&f===!1&&(f=!0);f===!0&&(d.current=e,d.old=e,d.callback(d))},f=function(a,b){return 0===arguments.length?$$CHOP.originalSourceFunction():1===arguments.length?$$CHOP.originalSourceFunction(a):($$CHOP.originalSourceFunction(a,b),void e(a))};$$CHOP.source=f});